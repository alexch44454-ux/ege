<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ï–ì–≠ –ê—Ä–∫–∞–¥–∞ - –†—É—Å—Å–∫–∏–π —è–∑—ã–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .game-container {
            width: 100%;
            max-width: 500px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .header {
            padding: 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            font-size: 16px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #ffd700;
        }

        .game-area {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
        }

        .question-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px 20px 0 0;
            transform: translateY(0);
            transition: transform 0.3s ease;
        }

        .question-container.hidden {
            transform: translateY(100%);
        }

        .question-text {
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .answer-btn {
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .answer-btn.correct {
            background: #4caf50;
            border-color: #4caf50;
        }

        .answer-btn.wrong {
            background: #f44336;
            border-color: #f44336;
        }

        .answer-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .falling-word {
            position: absolute;
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            animation: fall linear;
            pointer-events: none;
        }

        @keyframes fall {
            from {
                top: -50px;
                opacity: 1;
            }
            to {
                top: 100vh;
                opacity: 0;
            }
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 2s ease-out forwards;
        }

        @keyframes particle-float {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(0);
            }
        }

        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
        }

        .game-over.show {
            display: flex;
        }

        .game-over h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .final-stats {
            text-align: center;
            margin-bottom: 30px;
        }

        .final-stats p {
            font-size: 20px;
            margin: 10px 0;
        }

        .restart-btn {
            padding: 15px 30px;
            background: #4caf50;
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .progress-bar {
            height: 5px;
            background: rgba(255, 255, 255, 0.3);
            margin: 10px 0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #4caf50;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üéÆ –ï–ì–≠ –ê—Ä–∫–∞–¥–∞</h1>
            <div class="stats">
                <div class="stat-item">
                    <span>–û—á–∫–∏</span>
                    <span class="stat-value" id="score">0</span>
                </div>
                <div class="stat-item">
                    <span>–ü—Ä–∞–≤–∏–ª—å–Ω–æ</span>
                    <span class="stat-value" id="correct">0</span>
                </div>
                <div class="stat-item">
                    <span>–í–æ–ø—Ä–æ—Å</span>
                    <span class="stat-value" id="questionNum">0</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>
        </div>

        <div class="game-area" id="gameArea"></div>

        <div class="question-container" id="questionContainer">
            <div class="question-text" id="questionText"></div>
            <div class="answers" id="answers"></div>
        </div>

        <div class="game-over" id="gameOver">
            <h2>üéâ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
            <div class="final-stats">
                <p>üèÜ –û—á–∫–∏: <span id="finalScore">0</span></p>
                <p>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: <span id="finalCorrect">0</span>/<span id="finalTotal">0</span></p>
                <p>üìà –¢–æ—á–Ω–æ—Å—Ç—å: <span id="finalAccuracy">0</span>%</p>
            </div>
            <button class="restart-btn" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        // –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ï–ì–≠ –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É
        const questions = [
            {
                question: "–í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ –ø—Ä–æ–ø—É—â–µ–Ω–∞ –±—É–∫–≤–∞ –ï?",
                answers: ["–ø—Ä..–±—Ä–µ–∂–Ω—ã–π", "–ø—Ä..–æ–¥–æ–ª–µ—Ç—å", "–ø—Ä..–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å", "–ø—Ä..—Å–ª–µ–¥–æ–≤–∞—Ç—å"],
                correct: 0,
                explanation: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø—Ä–∏–±—Ä–µ–∂–Ω—ã–π (–ø—Ä–∏—Å—Ç–∞–≤–∫–∞ –ü–†–ò- –æ–∑–Ω–∞—á–∞–µ—Ç '–±–ª–∏–∑–æ—Å—Ç—å')"
            },
            {
                question: "–í –∫–∞–∫–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –ù–ï —Å–æ —Å–ª–æ–≤–æ–º –ø–∏—à–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ?",
                answers: [
                    "–≠—Ç–æ (–Ω–µ)–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–∏—Å–∞—Ç–µ–ª—å.",
                    "–û–Ω (–Ω–µ)–≤—ã—Å–æ–∫–∏–π, –∞ –Ω–∏–∑–∫–∏–π.",
                    "–ó–∞–¥–∞—á–∞ (–Ω–µ)—Ä–µ—à–µ–Ω–∞.",
                    "–û–Ω (–Ω–µ)–ø—Ä–∏—è—Ç–Ω—ã–π —á–µ–ª–æ–≤–µ–∫."
                ],
                correct: 1,
                explanation: "–ù–ï –ø–∏—à–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Å–æ—é–∑–æ–º '–∞'"
            },
            {
                question: "–£–∫–∞–∂–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –ø—É–Ω–∫—Ç—É–∞—Ü–∏–æ–Ω–Ω–æ–π –æ—à–∏–±–∫–æ–π:",
                answers: [
                    "–°–æ–ª–Ω—Ü–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–≤–µ—Ç–∏–ª–æ —è—Ä–∫–æ, —Å–æ–≥—Ä–µ–≤–∞–ª–æ –∑–µ–º–ª—é.",
                    "–û–Ω –ø—Ä–∏—à–µ–ª, –Ω–æ –æ–Ω–∞ —É–∂–µ —É—à–ª–∞.",
                    "–í –ª–µ—Å—É, –≥–¥–µ –º—ã –≥—É–ª—è–ª–∏, –±—ã–ª–æ —Ç–∏—Ö–æ.",
                    "–Ø –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –¥–µ–ª–∞—Ç—å."
                ],
                correct: 0,
                explanation: "–í –ø–µ—Ä–≤–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –∑–∞–ø—è—Ç–∞—è –ø–µ—Ä–µ–¥ '–∫–æ—Ç–æ—Ä–æ–µ' –Ω–µ –Ω—É–∂–Ω–∞, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–µ —Å–ª–æ–≤–æ"
            },
            {
                question: "–í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ —É–¥–∞—Ä–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ –ø–µ—Ä–≤—ã–π —Å–ª–æ–≥?",
                answers: ["–∑–≤–æ–Ω–ò—Ç", "–∫–≤–∞—Ä—Ç–ê–ª", "–¥–û–≥–æ–≤–æ—Ä", "—Å—Ä–µ–¥—Å—Ç–≤–ê"],
                correct: 2,
                explanation: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ: –¥–û–≥–æ–≤–æ—Ä (—É–¥–∞—Ä–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–≤—ã–π —Å–ª–æ–≥)"
            },
            {
                question: "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:",
                answers: [
                    "–û–¥–µ—Ç—å –ø–∞–ª—å—Ç–æ",
                    "–ù–∞–¥–µ—Ç—å –ø–∞–ª—å—Ç–æ",
                    "–û–¥–µ—Ç—å—Å—è –ø–∞–ª—å—Ç–æ",
                    "–ù–∞–¥–µ—Ç—å—Å—è –ø–∞–ª—å—Ç–æ"
                ],
                correct: 1,
                explanation: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ: –Ω–∞–¥–µ—Ç—å –ø–∞–ª—å—Ç–æ (–Ω–∞–¥–µ—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞ —Å–µ–±—è)"
            },
            {
                question: "–í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ –ø–∏—à–µ—Ç—Å—è –æ–¥–Ω–∞ –±—É–∫–≤–∞ –ù?",
                answers: ["–¥–µ—Ä–µ–≤—è..—ã–π", "—Å—Ç–µ–∫–ª—è..—ã–π", "–æ–ª–æ–≤—è..—ã–π", "–≤–µ—Ç—Ä–µ..—ã–π"],
                correct: 3,
                explanation: "–í–µ—Ç—Ä–µ–Ω—ã–π –ø–∏—à–µ—Ç—Å—è —Å –æ–¥–Ω–æ–π –ù (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ)"
            },
            {
                question: "–£–∫–∞–∂–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–æ–π:",
                answers: [
                    "–û–Ω –ø—Ä–∏—à–µ–ª —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.",
                    "–ë–ª–∞–≥–æ–¥–∞—Ä—è –¥–æ–∂–¥—é, —É—Ä–æ–∂–∞–π –±—ã–ª —Ö–æ—Ä–æ—à–∏–º.",
                    "–ü–æ –ø—Ä–∏–µ–∑–¥—É –≤ –≥–æ—Ä–æ–¥, –æ–Ω —Å—Ä–∞–∑—É –ø–æ—à–µ–ª –≤ –º—É–∑–µ–π.",
                    "–í–æ–ø—Ä–µ–∫–∏ –æ–∂–∏–¥–∞–Ω–∏—è–º, –≤—Å–µ –ø—Ä–æ—à–ª–æ —Ö–æ—Ä–æ—à–æ."
                ],
                correct: 2,
                explanation: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–æ –ø—Ä–∏–µ–∑–¥–µ (–ø—Ä–µ–¥–ª–æ–≥ –ü–û —Ç—Ä–µ–±—É–µ—Ç –¥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞–¥–µ–∂–∞)"
            },
            {
                question: "–í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ –ø–∏—à–µ—Ç—Å—è –¨?",
                answers: ["–ø–ª–∞—â..", "–º—ã—à..", "–Ω–æ—á..", "–∫–ª—é—á.."],
                correct: 1,
                explanation: "–ú—è–≥–∫–∏–π –∑–Ω–∞–∫ –ø–∏—à–µ—Ç—Å—è –ø–æ—Å–ª–µ —à–∏–ø—è—â–∏—Ö –≤ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∂–µ–Ω—Å–∫–æ–≥–æ —Ä–æ–¥–∞ 3-–≥–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è"
            },
            {
                question: "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ:",
                answers: [
                    "–° –¥–≤–∞–¥—Ü–∞—Ç—å—é –ø—è—Ç—å—é —Ä—É–±–ª—è–º–∏",
                    "–° –¥–≤–∞–¥—Ü–∞—Ç—å—é –ø—è—Ç—å—é —Ä—É–±–ª—è–º–∏",
                    "–° –¥–≤–∞–¥—Ü–∞—Ç—å—é –ø—è—Ç—å—é —Ä—É–±–ª—è–º–∏",
                    "–° –¥–≤–∞–¥—Ü–∞—Ç—å—é –ø—è—Ç—å—é —Ä—É–±–ª—è–º–∏"
                ],
                correct: 0,
                explanation: "–í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞"
            },
            {
                question: "–í –∫–∞–∫–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–∏—Ä–µ?",
                answers: [
                    "–ú–æ—Å–∫–≤–∞ —Å—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏.",
                    "–ú–æ—Å–∫–≤–∞ —ç—Ç–æ —Å—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏.",
                    "–ú–æ—Å–∫–≤–∞ –±—ã–ª–∞ —Å—Ç–æ–ª–∏—Ü–µ–π –†–æ—Å—Å–∏–∏.",
                    "–ú–æ—Å–∫–≤–∞ —Å—Ç–∞–ª–∞ —Å—Ç–æ–ª–∏—Ü–µ–π –†–æ—Å—Å–∏–∏."
                ],
                correct: 0,
                explanation: "–¢–∏—Ä–µ —Å—Ç–∞–≤–∏—Ç—Å—è –º–µ–∂–¥—É –ø–æ–¥–ª–µ–∂–∞—â–∏–º –∏ —Å–∫–∞–∑—É–µ–º—ã–º, –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–º–∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤ –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω–æ–º –ø–∞–¥–µ–∂–µ"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let gameStartTime = Date.now();
        let fallingWordsInterval = null;
        let questionTimeout = null;
        let consecutiveCorrect = 0;

        function initGame() {
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            totalQuestions = 0;
            consecutiveCorrect = 0;
            gameStartTime = Date.now();
            document.getElementById('gameOver').classList.remove('show');
            document.getElementById('questionContainer').classList.remove('hidden');
            updateStats();
            showQuestion();
            startFallingWords();
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                endGame();
                return;
            }

            const q = questions[currentQuestion];
            document.getElementById('questionText').textContent = q.question;
            
            const answersDiv = document.getElementById('answers');
            answersDiv.innerHTML = '';

            q.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = answer;
                btn.onclick = () => selectAnswer(index);
                answersDiv.appendChild(btn);
            });

            totalQuestions++;
            updateStats();

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
            if (questionTimeout) clearTimeout(questionTimeout);
            questionTimeout = setTimeout(() => {
                selectAnswer(-1); // -1 –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (–≤—Ä–µ–º—è –≤—ã—à–ª–æ)
            }, 30000);
        }

        function selectAnswer(selectedIndex) {
            if (questionTimeout) {
                clearTimeout(questionTimeout);
                questionTimeout = null;
            }

            const q = questions[currentQuestion];
            const buttons = document.querySelectorAll('.answer-btn');
            
            buttons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === q.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && index !== q.correct) {
                    btn.classList.add('wrong');
                }
            });

            if (selectedIndex === q.correct) {
                correctAnswers++;
                consecutiveCorrect++;
                score += 10 + (consecutiveCorrect > 1 ? 5 : 0); // –ë–æ–Ω—É—Å –∑–∞ —Å–µ—Ä–∏—é
                createParticles();
            } else {
                consecutiveCorrect = 0;
                if (selectedIndex !== -1) {
                    score = Math.max(0, score - 5);
                }
            }

            updateStats();

            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 2000);
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('correct').textContent = correctAnswers;
            document.getElementById('questionNum').textContent = totalQuestions;
            
            const progress = (totalQuestions / questions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        function startFallingWords() {
            if (fallingWordsInterval) clearInterval(fallingWordsInterval);
            
            const words = ['–ï–ì–≠', '–†—É—Å—Å–∫–∏–π', '–Ø–∑—ã–∫', '–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞', '–û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—è', '–ü—É–Ω–∫—Ç—É–∞—Ü–∏—è'];
            
            fallingWordsInterval = setInterval(() => {
                const word = words[Math.floor(Math.random() * words.length)];
                createFallingWord(word);
            }, 2000);
        }

        function createFallingWord(word) {
            const gameArea = document.getElementById('gameArea');
            const wordEl = document.createElement('div');
            wordEl.className = 'falling-word';
            wordEl.textContent = word;
            wordEl.style.left = Math.random() * (gameArea.offsetWidth - 100) + 'px';
            wordEl.style.animationDuration = (3 + Math.random() * 2) + 's';
            gameArea.appendChild(wordEl);

            setTimeout(() => {
                wordEl.remove();
            }, 5000);
        }

        function createParticles() {
            const gameArea = document.getElementById('gameArea');
            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * gameArea.offsetWidth + 'px';
                particle.style.top = (gameArea.offsetHeight - 200) + 'px';
                particle.style.animationDelay = (Math.random() * 0.5) + 's';
                gameArea.appendChild(particle);

                setTimeout(() => {
                    particle.remove();
                }, 2000);
            }
        }

        function endGame() {
            if (fallingWordsInterval) {
                clearInterval(fallingWordsInterval);
                fallingWordsInterval = null;
            }
            if (questionTimeout) {
                clearTimeout(questionTimeout);
                questionTimeout = null;
            }

            document.getElementById('questionContainer').classList.add('hidden');
            
            const timeSpent = Math.floor((Date.now() - gameStartTime) / 1000);
            const accuracy = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;

            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalCorrect').textContent = correctAnswers;
            document.getElementById('finalTotal').textContent = totalQuestions;
            document.getElementById('finalAccuracy').textContent = accuracy;

            document.getElementById('gameOver').classList.add('show');

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –±–æ—Ç–∞
            if (tg && tg.sendData) {
                const result = {
                    score: score,
                    correct: correctAnswers,
                    total: totalQuestions,
                    timeSpent: timeSpent,
                    accuracy: accuracy
                };
                tg.sendData(JSON.stringify(result));
            }
        }

        function restartGame() {
            initGame();
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        initGame();
    </script>
</body>
</html>

